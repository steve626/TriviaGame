function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function initHotjar(){!function(e,t,n,o,r,i){e.hj=e.hj||function(){(e.hj.q=e.hj.q||[]).push(arguments)},e._hjSettings={hjid:171201,hjsv:5},r=t.getElementsByTagName("head")[0],(i=t.createElement("script")).async=1,i.src=n+e._hjSettings.hjid+o+e._hjSettings.hjsv,r.appendChild(i)}(window,document,"//static.hotjar.com/c/hotjar-",".js?sv=")}!function(){"use strict";function e(e,t,n,o,r,i){return{tag:e,key:t,attrs:n,children:o,text:r,dom:i,domSize:undefined,state:undefined,_state:undefined,events:undefined,instance:undefined,skip:!1}}function t(e){for(var t in e)if(c.call(e,t))return!1;return!0}function n(e){for(var t,n="div",o=[],r={};t=a.exec(e);){var i=t[1],c=t[2];if(""===i&&""!==c)n=c;else if("#"===i)r.id=c;else if("."===i)o.push(c);else if("["===t[3][0]){var u=t[6];u&&(u=u.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?o.push(u):r[t[4]]=""===u?u:u||!0}}return o.length>0&&(r.className=o.join(" ")),l[e]={tag:n,attrs:r}}function o(n,o,r){var i,a,l=!1,u=o.className||o["class"];if(!t(n.attrs)&&!t(o)){var s={};for(var d in o)c.call(o,d)&&(s[d]=o[d]);o=s}for(var d in n.attrs)c.call(n.attrs,d)&&(o[d]=n.attrs[d]);u!==undefined&&(o["class"]!==undefined&&(o["class"]=undefined,o.className=u),null!=n.attrs.className&&(o.className=n.attrs.className+" "+u));for(var d in o)if(c.call(o,d)&&"key"!==d){l=!0;break}return Array.isArray(r)&&1===r.length&&null!=r[0]&&"#"===r[0].tag?a=r[0].children:i=r,e(n.tag,o.key,l?o:undefined,i,a)}function r(t){var r,i=arguments[1],a=2;if(null==t||"string"!=typeof t&&"function"!=typeof t&&"function"!=typeof t.view)throw Error("The selector must be either a string or a component.");if("string"==typeof t)var c=l[t]||n(t);if(null==i?i={}:("object"!=typeof i||null!=i.tag||Array.isArray(i))&&(i={},a=1),arguments.length===a+1)r=arguments[a],Array.isArray(r)||(r=[r]);else for(r=[];a<arguments.length;)r.push(arguments[a++]);var u=e.normalizeChildren(r);return"string"==typeof t?o(c,i,u):e(t,i.key,i,u)}function i(e){var t=16,n=0,o=null,r="function"==typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(){var i=Date.now();0===n||i-n>=t?(n=i,e()):null===o&&(o=r(function(){o=null,e(),n=Date.now()},t-(i-n)))}}e.normalize=function(t){return Array.isArray(t)?e("[",undefined,undefined,e.normalizeChildren(t),undefined,undefined):null!=t&&"object"!=typeof t?e("#",undefined,undefined,!1===t?"":t,undefined,undefined):t},e.normalizeChildren=function(t){for(var n=0;n<t.length;n++)t[n]=e.normalize(t[n]);return t};var a=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,l={},c={}.hasOwnProperty;r.trust=function(t){return null==t&&(t=""),e("<",undefined,undefined,t,undefined,undefined)},r.fragment=function(t,n){return e("[",t.key,t,e.normalizeChildren(n),undefined,undefined)};var u=r;if((s=function(e){function t(e,t){return function a(s){var d;try{if(!t||null==s||"object"!=typeof s&&"function"!=typeof s||"function"!=typeof(d=s.then))u(function(){t||0!==e.length||console.error("Possible unhandled promise rejection:",s);for(var n=0;n<e.length;n++)e[n](s);r.length=0,i.length=0,c.state=t,c.retry=function(){a(s)}});else{if(s===o)throw new TypeError("Promise can't be resolved w/ itself");n(d.bind(s))}}catch(f){l(f)}}}function n(e){function t(e){return function(t){n++>0||e(t)}}var n=0,o=t(l);try{e(t(a),o)}catch(r){o(r)}}if(!(this instanceof s))throw new Error("Promise must be called with `new`");if("function"!=typeof e)throw new TypeError("executor must be a function");var o=this,r=[],i=[],a=t(r,!0),l=t(i,!1),c=o._instance={resolvers:r,rejectors:i},u="function"==typeof setImmediate?setImmediate:setTimeout;n(e)}).prototype.then=function(e,t){function n(e,t,n,a){t.push(function(t){if("function"!=typeof e)n(t);else try{o(e(t))}catch(i){r&&r(i)}}),"function"==typeof i.retry&&a===i.state&&i.retry()}var o,r,i=this._instance,a=new s(function(e,t){o=e,r=t});return n(e,i.resolvers,o,!0),n(t,i.rejectors,r,!1),a},s.prototype["catch"]=function(e){return this.then(null,e)},s.resolve=function(e){return e instanceof s?e:new s(function(t){t(e)})},s.reject=function(e){return new s(function(t,n){n(e)})},s.all=function(e){return new s(function(t,n){var o=e.length,r=0,i=[];if(0===e.length)t([]);else for(var a=0;a<e.length;a++)!function(a){function l(e){r++,i[a]=e,r===o&&t(i)}null==e[a]||"object"!=typeof e[a]&&"function"!=typeof e[a]||"function"!=typeof e[a].then?l(e[a]):e[a].then(l,n)}(a)})},s.race=function(e){return new s(function(t,n){for(var o=0;o<e.length;o++)e[o].then(t,n)})},"undefined"!=typeof window){"undefined"==typeof window.Promise&&(window.Promise=s);var s=window.Promise}else if("undefined"!=typeof global){"undefined"==typeof global.Promise&&(global.Promise=s);s=global.Promise}var d=function(e){function t(e,o){if(Array.isArray(o))for(var r=0;r<o.length;r++)t(e+"["+r+"]",o[r]);else if("[object Object]"===Object.prototype.toString.call(o))for(var r in o)t(e+"["+r+"]",o[r]);else n.push(encodeURIComponent(e)+(null!=o&&""!==o?"="+encodeURIComponent(o):""))}if("[object Object]"!==Object.prototype.toString.call(e))return"";var n=[];for(var o in e)t(o,e[o]);return n.join("&")},f=new RegExp("^file://","i"),m=function(e,t){function n(e){p=e}function o(){function e(){0==--t&&"function"==typeof p&&p()}var t=0;return function n(o){var r=o.then;return o.then=function(){t++;var i=r.apply(o,arguments);return i.then(e,function(n){if(e(),0===t)throw n}),n(i)},o}}function r(e,t){if("string"==typeof e){var n=e;null==(e=t||{}).url&&(e.url=n)}return e}function i(n,i){var a=o();n=r(n,i);var d=new t(function(t,o){null==n.method&&(n.method="GET"),n.method=n.method.toUpperCase();var r="GET"!==n.method&&"TRACE"!==n.method&&("boolean"!=typeof n.useBody||n.useBody);"function"!=typeof n.serialize&&(n.serialize="undefined"!=typeof FormData&&n.data instanceof FormData?function(e){return e}:JSON.stringify),"function"!=typeof n.deserialize&&(n.deserialize=u),"function"!=typeof n.extract&&(n.extract=s),n.url=l(n.url,n.data),r?n.data=n.serialize(n.data):n.url=c(n.url,n.data);var i=new e.XMLHttpRequest,a=!1,d=i.abort;i.abort=function(){a=!0,d.call(i)},i.open(n.method,n.url,"boolean"!=typeof n.async||n.async,"string"==typeof n.user?n.user:undefined,"string"==typeof n.password?n.password:undefined),n.serialize!==JSON.stringify||!r||n.headers&&n.headers.hasOwnProperty("Content-Type")||i.setRequestHeader("Content-Type","application/json; charset=utf-8"),n.deserialize!==u||n.headers&&n.headers.hasOwnProperty("Accept")||i.setRequestHeader("Accept","application/json, text/*"),n.withCredentials&&(i.withCredentials=n.withCredentials);for(var p in n.headers)({}).hasOwnProperty.call(n.headers,p)&&i.setRequestHeader(p,n.headers[p]);"function"==typeof n.config&&(i=n.config(i,n)||i),i.onreadystatechange=function(){if(!a&&4===i.readyState)try{var e=n.extract!==s?n.extract(i,n):n.deserialize(n.extract(i,n));if(i.status>=200&&i.status<300||304===i.status||f.test(n.url))t(m(n.type,e));else{var r=new Error(i.responseText);for(var l in e)r[l]=e[l];o(r)}}catch(c){o(c)}},r&&null!=n.data?i.send(n.data):i.send()});return!0===n.background?d:a(d)}function a(n,i){var a=o();n=r(n,i);var u=new t(function(t,o){var r=n.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+h++,i=e.document.createElement("script");e[r]=function(o){i.parentNode.removeChild(i),t(m(n.type,o)),delete e[r]},i.onerror=function(){i.parentNode.removeChild(i),o(new Error("JSONP request failed")),delete e[r]},null==n.data&&(n.data={}),n.url=l(n.url,n.data),n.data[n.callbackKey||"callback"]=r,i.src=c(n.url,n.data),e.document.documentElement.appendChild(i)});return!0===n.background?u:a(u)}function l(e,t){if(null==t)return e;for(var n=e.match(/:[^\/]+/gi)||[],o=0;o<n.length;o++){var r=n[o].slice(1);null!=t[r]&&(e=e.replace(n[o],t[r]))}return e}function c(e,t){var n=d(t);if(""!==n){e+=(e.indexOf("?")<0?"?":"&")+n}return e}function u(e){try{return""!==e?JSON.parse(e):null}catch(t){throw new Error(e)}}function s(e){return e.responseText}function m(e,t){if("function"==typeof e){if(!Array.isArray(t))return new e(t);for(var n=0;n<t.length;n++)t[n]=new e(t[n])}return t}var p,h=0;return{request:i,jsonp:a,setCompletionCallback:n}}(window,s),p=function(t){function n(e){return W=e}function o(e){return e.attrs&&e.attrs.xmlns||X[e.tag]}function r(e,t,n,o,r,a,l){for(var c=n;c<o;c++){var u=t[c];null!=u&&i(e,u,r,l,a)}}function i(e,t,n,o,r){var i=t.tag;if("string"!=typeof i)return d(e,t,n,o,r);switch(t.state={},null!=t.attrs&&R(t.attrs,t,n),i){case"#":return a(e,t,r);case"<":return l(e,t,r);case"[":return c(e,t,n,o,r);default:return u(e,t,n,o,r)}}function a(e,t,n){return t.dom=J.createTextNode(t.children),k(e,t.dom,n),t.dom}function l(e,t,n){var o={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[(t.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div",r=J.createElement(o);r.innerHTML=t.children,t.dom=r.firstChild,t.domSize=r.childNodes.length;for(var i,a=J.createDocumentFragment();i=r.firstChild;)a.appendChild(i);return k(e,a,n),a}function c(e,t,n,o,i){var a=J.createDocumentFragment();if(null!=t.children){var l=t.children;r(a,l,0,l.length,n,null,o)}return t.dom=a.firstChild,t.domSize=a.childNodes.length,k(e,a,i),a}function u(t,n,i,a,l){var c=n.tag,u=n.attrs,s=u&&u.is,d=(a=o(n)||a)?s?J.createElementNS(a,c,{is:s}):J.createElementNS(a,c):s?J.createElement(c,{is:s}):J.createElement(c);if(n.dom=d,null!=u&&E(n,u,a),k(t,d,l),null!=n.attrs&&null!=n.attrs.contenteditable)_(n);else if(null!=n.text&&(""!==n.text?d.textContent=n.text:n.children=[e("#",undefined,undefined,n.text,undefined,undefined)]),null!=n.children){var f=n.children;r(d,f,0,f.length,i,null,a),x(n)}return d}function s(t,n){var o;if("function"==typeof t.tag.view){if(t.state=Object.create(t.tag),null!=(o=t.state.view).$$reentrantLock$$)return $;o.$$reentrantLock$$=!0}else{if(t.state=void 0,null!=(o=t.tag).$$reentrantLock$$)return $;o.$$reentrantLock$$=!0,t.state=null!=t.tag.prototype&&"function"==typeof t.tag.prototype.view?new t.tag(t):t.tag(t)}if(t._state=t.state,null!=t.attrs&&R(t.attrs,t,n),R(t._state,t,n),t.instance=e.normalize(t._state.view.call(t.state,t)),t.instance===t)throw Error("A view cannot return the vnode it received as argument");o.$$reentrantLock$$=null}function d(e,t,n,o,r){if(s(t,n),null!=t.instance){var a=i(e,t.instance,n,o,r);return t.dom=t.instance.dom,t.domSize=null!=t.dom?t.instance.domSize:0,k(e,a,r),a}return t.domSize=0,$}function f(e,t,n,o,a,l,c){if(t!==n&&(null!=t||null!=n))if(null==t)r(e,n,0,n.length,a,l,c);else if(null==n)T(t,0,t.length,n);else{if(t.length===n.length){for(var u=!1,s=0;s<n.length;s++)if(null!=n[s]&&null!=t[s]){u=null==n[s].key&&null==t[s].key;break}if(u){for(s=0;s<t.length;s++)t[s]!==n[s]&&(null==t[s]&&null!=n[s]?i(e,n[s],a,c,S(t,s+1,l)):null==n[s]?T(t,s,s+1,n):m(e,t[s],n[s],a,S(t,s+1,l),o,c));return}}if(o=o||w(t,n)){var d=t.pool;t=t.concat(t.pool)}for(var f,p=0,h=0,v=t.length-1,g=n.length-1;v>=p&&g>=h;){if((_=t[p])!==(A=n[h])||o)if(null==_)p++;else if(null==A)h++;else if(_.key===A.key){var y=null!=d&&p>=t.length-d.length||null==d&&o;h++,m(e,_,A,a,S(t,++p,l),y,c),o&&_.tag===A.tag&&k(e,L(_),l)}else{if((_=t[v])!==A||o)if(null==_)v--;else if(null==A)h++;else{if(_.key!==A.key)break;y=null!=d&&v>=t.length-d.length||null==d&&o;m(e,_,A,a,S(t,v+1,l),y,c),(o||h<g)&&k(e,L(_),S(t,p,l)),v--,h++}else v--,h++}else p++,h++}for(;v>=p&&g>=h;){var _,A;if((_=t[v])!==(A=n[g])||o)if(null==_)v--;else if(null==A)g--;else if(_.key===A.key){y=null!=d&&v>=t.length-d.length||null==d&&o;m(e,_,A,a,S(t,v+1,l),y,c),o&&_.tag===A.tag&&k(e,L(_),l),null!=_.dom&&(l=_.dom),v--,g--}else{if(f||(f=b(t,v)),null!=A){var I=f[A.key];if(null!=I){var C=t[I];y=null!=d&&I>=t.length-d.length||null==d&&o;m(e,C,A,a,S(t,v+1,l),o,c),k(e,L(C),l),t[I].skip=!0,null!=C.dom&&(l=C.dom)}else{l=i(e,A,a,c,l)}}g--}else v--,g--;if(g<h)break}r(e,n,h,g+1,a,l,c),T(t,p,v+1,n)}}function m(e,t,n,o,r,a,l){var c=t.tag;if(c===n.tag){if(n.state=t.state,n._state=t._state,n.events=t.events,!a&&F(n,t))return;if("string"==typeof c)switch(null!=n.attrs&&(a?(n.state={},R(n.attrs,n,o)):H(n.attrs,n,o)),c){case"#":p(t,n);break;case"<":h(e,t,n,r);break;case"[":v(e,t,n,a,o,r,l);break;default:g(t,n,a,o,l)}else y(e,t,n,o,r,a,l)}else A(t,null),i(e,n,o,l,r)}function p(e,t){e.children.toString()!==t.children.toString()&&(e.dom.nodeValue=t.children),t.dom=e.dom}function h(e,t,n,o){t.children!==n.children?(L(t),l(e,n,o)):(n.dom=t.dom,n.domSize=t.domSize)}function v(e,t,n,o,r,i,a){f(e,t.children,n.children,o,r,i,a);var l=0,c=n.children;if(n.dom=null,null!=c){for(var u=0;u<c.length;u++){var s=c[u];null!=s&&null!=s.dom&&(null==n.dom&&(n.dom=s.dom),l+=s.domSize||1)}1!==l&&(n.domSize=l)}}function g(t,n,r,i,a){var l=n.dom=t.dom;a=o(n)||a,"textarea"===n.tag&&(null==n.attrs&&(n.attrs={}),null!=n.text&&(n.attrs.value=n.text,n.text=undefined)),U(n,t.attrs,n.attrs,a),null!=n.attrs&&null!=n.attrs.contenteditable?_(n):null!=t.text&&null!=n.text&&""!==n.text?t.text.toString()!==n.text.toString()&&(t.dom.firstChild.nodeValue=n.text):(null!=t.text&&(t.children=[e("#",undefined,undefined,t.text,undefined,t.dom.firstChild)]),null!=n.text&&(n.children=[e("#",undefined,undefined,n.text,undefined,undefined)]),f(l,t.children,n.children,r,i,null,a))}function y(t,n,o,r,a,l,c){if(l)s(o,r);else{if(o.instance=e.normalize(o._state.view.call(o.state,o)),o.instance===o)throw Error("A view cannot return the vnode it received as argument");null!=o.attrs&&H(o.attrs,o,r),H(o._state,o,r)}null!=o.instance?(null==n.instance?i(t,o.instance,r,c,a):m(t,n.instance,o.instance,r,a,l,c),o.dom=o.instance.dom,o.domSize=o.instance.domSize):null!=n.instance?(A(n.instance,null),o.dom=undefined,o.domSize=0):(o.dom=n.dom,o.domSize=n.domSize)}function w(e,t){if(null!=e.pool&&Math.abs(e.pool.length-t.length)<=Math.abs(e.length-t.length)){var n=e[0]&&e[0].children&&e[0].children.length||0,o=e.pool[0]&&e.pool[0].children&&e.pool[0].children.length||0,r=t[0]&&t[0].children&&t[0].children.length||0;if(Math.abs(o-r)<=Math.abs(n-r))return!0}return!1}function b(e,t){var n={},o=0;for(o=0;o<t;o++){var r=e[o];if(null!=r){var i=r.key;null!=i&&(n[i]=o)}}return n}function L(e){var t=e.domSize;if(null!=t||null==e.dom){var n=J.createDocumentFragment();if(t>0){for(var o=e.dom;--t;)n.appendChild(o.nextSibling);n.insertBefore(o,n.firstChild)}return n}return e.dom}function S(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function k(e,t,n){n&&n.parentNode?e.insertBefore(t,n):e.appendChild(t)}function _(e){var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=e.text||null!=t&&0!==t.length)throw new Error("Child node of a contenteditable must be trusted")}function T(e,t,n,o){for(var r=t;r<n;r++){var i=e[r];null!=i&&(i.skip?i.skip=!1:A(i,o))}}function A(e,t){function n(){if(++r===o&&(C(e),e.dom)){var n=e.domSize||1;if(n>1)for(var i=e.dom;--n;)I(i.nextSibling);I(e.dom),null==t||null!=e.domSize||z(e.attrs)||"string"!=typeof e.tag||(t.pool?t.pool.push(e):t.pool=[e])}}var o=1,r=0;if(e.attrs&&"function"==typeof e.attrs.onbeforeremove){null!=(i=e.attrs.onbeforeremove.call(e.state,e))&&"function"==typeof i.then&&(o++,i.then(n,n))}if("string"!=typeof e.tag&&"function"==typeof e._state.onbeforeremove){var i;null!=(i=e._state.onbeforeremove.call(e.state,e))&&"function"==typeof i.then&&(o++,i.then(n,n))}n()}function I(e){var t=e.parentNode;null!=t&&t.removeChild(e)}function C(e){if(e.attrs&&"function"==typeof e.attrs.onremove&&e.attrs.onremove.call(e.state,e),"string"!=typeof e.tag)"function"==typeof e._state.onremove&&e._state.onremove.call(e.state,e),null!=e.instance&&C(e.instance);else{var t=e.children;if(Array.isArray(t))for(var n=0;n<t.length;n++){var o=t[n];null!=o&&C(o)}}}function E(e,t,n){for(var o in t)q(e,o,null,t[o],n)}function q(e,t,n,o,r){var i=e.dom;if("key"!==t&&"is"!==t&&(n!==o||P(e,t)||"object"==typeof o)&&void 0!==o&&!j(t)){var a=t.indexOf(":");if(a>-1&&"xlink"===t.substr(0,a))i.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(a+1),o);else if("o"===t[0]&&"n"===t[1]&&"function"==typeof o)M(e,t,o);else if("style"===t)D(i,n,o);else if(t in i&&!O(t)&&r===undefined&&!N(e)){if("value"===t){var l=""+o;if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===l&&e.dom===J.activeElement)return;if("select"===e.tag)if(null===o){if(-1===e.dom.selectedIndex&&e.dom===J.activeElement)return}else if(null!==n&&e.dom.value===l&&e.dom===J.activeElement)return;if("option"===e.tag&&null!=n&&e.dom.value===l)return}if("input"===e.tag&&"type"===t)return void i.setAttribute(t,o);i[t]=o}else"boolean"==typeof o?o?i.setAttribute(t,""):i.removeAttribute(t):i.setAttribute("className"===t?"class":t,o)}}function x(e){var t=e.attrs;"select"===e.tag&&null!=t&&("value"in t&&q(e,"value",null,t.value,undefined),"selectedIndex"in t&&q(e,"selectedIndex",null,t.selectedIndex,undefined))}function U(e,t,n,o){if(null!=n)for(var r in n)q(e,r,t&&t[r],n[r],o);if(null!=t)for(var r in t)null!=n&&r in n||("className"===r&&(r="class"),"o"!==r[0]||"n"!==r[1]||j(r)?"key"!==r&&e.dom.removeAttribute(r):M(e,r,undefined))}function P(e,t){return"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===J.activeElement}function j(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function O(e){return"href"===e||"list"===e||"form"===e||"width"===e||"height"===e}function N(e){return e.attrs.is||e.tag.indexOf("-")>-1}function z(e){return null!=e&&(e.oncreate||e.onupdate||e.onbeforeremove||e.onremove)}function D(e,t,n){if(t===n&&(e.style.cssText="",t=null),null==n)e.style.cssText="";else if("string"==typeof n)e.style.cssText=n;else{"string"==typeof t&&(e.style.cssText="");for(var o in n)e.style[o]=n[o];if(null!=t&&"string"!=typeof t)for(var o in t)o in n||(e.style[o]="")}}function M(e,t,n){var o=e.dom,r="function"!=typeof W?n:function(e){var t=n.call(o,e);return W.call(o,e),t};if(t in o)o[t]="function"==typeof n?r:null;else{var i=t.slice(2);if(e.events===undefined&&(e.events={}),e.events[t]===r)return;null!=e.events[t]&&o.removeEventListener(i,e.events[t],!1),"function"==typeof n&&(e.events[t]=r,o.addEventListener(i,e.events[t],!1))}}function R(e,t,n){"function"==typeof e.oninit&&e.oninit.call(t.state,t),"function"==typeof e.oncreate&&n.push(e.oncreate.bind(t.state,t))}function H(e,t,n){"function"==typeof e.onupdate&&n.push(e.onupdate.bind(t.state,t))}function F(e,t){var n,o;return null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate&&(n=e.attrs.onbeforeupdate.call(e.state,e,t)),"string"!=typeof e.tag&&"function"==typeof e._state.onbeforeupdate&&(o=e._state.onbeforeupdate.call(e.state,e,t)),!(n===undefined&&o===undefined||n||o)&&(e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,!0)}function B(t,n){if(!t)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var o=[],r=J.activeElement,i=t.namespaceURI;null==t.vnodes&&(t.textContent=""),Array.isArray(n)||(n=[n]),f(t,t.vnodes,e.normalizeChildren(n),!1,o,null,"http://www.w3.org/1999/xhtml"===i?undefined:i),t.vnodes=n,null!=r&&J.activeElement!==r&&r.focus();for(var a=0;a<o.length;a++)o[a]()}var W,J=t.document,$=J.createDocumentFragment(),X={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};return{render:B,setEventCallback:n}},h=function(e){function t(e,t){n(e),a.push(e,i(t))}function n(e){var t=a.indexOf(e);t>-1&&a.splice(t,2)}function o(){for(var e=1;e<a.length;e+=2)a[e]()}var r=p(e);r.setEventCallback(function(e){!1===e.redraw?e.redraw=undefined:o()});var a=[];return{subscribe:t,unsubscribe:n,redraw:o,render:r.render}}(window);m.setCompletionCallback(h.redraw);var v=function(t){return function(n,o){if(null===o)return t.render(n,[]),void t.unsubscribe(n);if(null==o.view&&"function"!=typeof o)throw new Error("m.mount(element, component) expects a component, not a vnode");var r=function(){t.render(n,e(o))};t.subscribe(n,r),t.redraw()}};u.mount=v(h);var g=s,y=function(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));for(var t=e.split("&"),n={},o={},r=0;r<t.length;r++){var i=t[r].split("="),a=decodeURIComponent(i[0]),l=2===i.length?decodeURIComponent(i[1]):"";"true"===l?l=!0:"false"===l&&(l=!1);var c=a.split(/\]\[?|\[/),u=n;a.indexOf("[")>-1&&c.pop();for(var s=0;s<c.length;s++){var d=c[s],f=c[s+1],m=""==f||!isNaN(parseInt(f,10)),p=s===c.length-1;if(""===d){null==o[a=c.slice(0,s).join()]&&(o[a]=0),d=o[a]++}null==u[d]&&(u[d]=p?l:m?[]:{}),u=u[d]}}return n},w=function(e){function t(t){var n=e.location[t].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);return"pathname"===t&&"/"!==n[0]&&(n="/"+n),n}function n(e){return function(){null==r&&(r=a(function(){r=null,e()}))}}function o(e,t,n){var o=e.indexOf("?"),r=e.indexOf("#"),i=o>-1?o:r>-1?r:e.length;if(o>-1){var a=r>-1?r:e.length,l=y(e.slice(o+1,a));for(var c in l)t[c]=l[c]}if(r>-1){var u=y(e.slice(r+1));for(var c in u)n[c]=u[c]}return e.slice(0,i)}var r,i="function"==typeof e.history.pushState,a="function"==typeof setImmediate?setImmediate:setTimeout,l={prefix:"#!"};return l.getPath=function(){switch(l.prefix.charAt(0)){case"#":return t("hash").slice(l.prefix.length);case"?":return t("search").slice(l.prefix.length)+t("hash");default:return t("pathname").slice(l.prefix.length)+t("search")+t("hash")}},l.setPath=function(t,n,r){var a={},c={};if(t=o(t,a,c),null!=n){for(var u in n)a[u]=n[u];t=t.replace(/:([^\/]+)/g,function(e,t){return delete a[t],n[t]})}var s=d(a);s&&(t+="?"+s);var f=d(c);if(f&&(t+="#"+f),i){var m=r?r.state:null,p=r?r.title:null;e.onpopstate(),r&&r.replace?e.history.replaceState(m,p,l.prefix+t):e.history.pushState(m,p,l.prefix+t)}else e.location.href=l.prefix+t},l.defineRoutes=function(t,r,a){function c(){var n=l.getPath(),i={},c=o(n,i,i),u=e.history.state;if(null!=u)for(var s in u)i[s]=u[s];for(var d in t){var f=new RegExp("^"+d.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(f.test(c))return void c.replace(f,function(){for(var e=d.match(/:[^\/]+/g)||[],o=[].slice.call(arguments,1,-2),a=0;a<e.length;a++)i[e[a].replace(/:|\./g,"")]=decodeURIComponent(o[a]);r(t[d],i,n,d)})}a(n,i)}i?e.onpopstate=n(c):"#"===l.prefix.charAt(0)&&(e.onhashchange=c),c()},l},b=function(t,n){var o,r,i,a,l,c=w(t),u=function(e){return e},s=function(t,s,d){if(null==t)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var f=function(){null!=o&&n.render(t,o(e(r,i.key,i)))},m=function(e){if(e===s)throw new Error("Could not resolve default route "+s);c.setPath(s,null,{replace:!0})};c.defineRoutes(d,function(e,t,n){var c=l=function(e,s){c===l&&(r=null==s||"function"!=typeof s.view&&"function"!=typeof s?"div":s,i=t,a=n,l=null,o=(e.render||u).bind(e),f())};e.view||"function"==typeof e?c({},e):e.onmatch?g.resolve(e.onmatch(t,n)).then(function(t){c(e,t)},m):c(e,"div")},m),n.subscribe(t,f)};return s.set=function(e,t,n){null!=l&&((n=n||{}).replace=!0),l=null,c.setPath(e,t,n)},s.get=function(){return a},s.prefix=function(e){c.prefix=e},s.link=function(e){e.dom.setAttribute("href",c.prefix+e.attrs.href),e.dom.onclick=function(e){if(!(e.ctrlKey||e.metaKey||e.shiftKey||2===e.which)){e.preventDefault(),e.redraw=!1;var t=this.getAttribute("href");0===t.indexOf(c.prefix)&&(t=t.slice(c.prefix.length)),s.set(t,undefined,undefined)}}},s.param=function(e){return void 0!==i&&void 0!==e?i[e]:i},s};u.route=b(window,h),u.withAttr=function(e,t,n){return function(o){t.call(n||this,e in o.currentTarget?o.currentTarget[e]:o.currentTarget.getAttribute(e))}};var L=p(window);u.render=L.render,u.redraw=h.redraw,u.request=m.request,u.jsonp=m.jsonp,u.parseQueryString=y,u.buildQueryString=d,u.version="1.1.6",u.vnode=e,"undefined"!=typeof module?module.exports=u:window.m=u}();var LoadingSpinner={view:function(){return[m(".spinner",[m("div"),m("div"),m("div"),m("div")]),m(".ie-fallback","Loading\u2026")]}},ModalInitializer=function(e){function t(e){27==e.keyCode&&r()}function n(e){for(var t=e.target;t&&"body"!=t.tagName.toLowerCase();){if(UTIL.hasClass(t,"modal__content"))return;t=t.parentNode}t&&r()}function o(){if(!i(e.onOpen)||!1!==e.onOpen.apply(arguments)){var o=document.querySelector(e.selector);UTIL.addClass(document.body,"has-open-modal"),UTIL.addClass(o,"is-open"),document.addEventListener("keydown",t),document.addEventListener("click",n)}}function r(){if(!i(e.onClose)||!1!==e.onClose.apply(arguments)){var o=document.querySelector(e.selector);document.removeEventListener("keydown",t),document.removeEventListener("click",n),UTIL.removeClass(document.body,"has-open-modal"),UTIL.removeClass(o,"is-open")}}function i(e){return void 0!==e&&"function"==typeof e}return e=e||{},{open:o,close:r}},Analytics=function(){function e(){a(),t()}function t(){r("page")}function n(e,t,n,o,i){r("track",{event:t||"",propertiesCategory:e||"",propertiesLabel:n||"",propertiesValue:o||""},i)}function o(){return d}function r(e,t,n){var o=i(e);t&&(o=Object.assign(t,o));var r=Object.keys(o).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(o[e])}).join("&"),a=f+"?"+r;if("beacon"==n&&navigator.sendBeacon)navigator.sendBeacon(a);else{var l=new XMLHttpRequest;l.open("GET",a,!0),l.send()}}function i(e){var t=window.innerWidth||(document.documentElement||{}).clientWidth,n=window.innerHeight||(document.documentElement||{}).clientHeight,o=parseInt(1e9*Math.random());return{apiKey:m+t+document.title.length+document.URL.length+o,ui:o,anonymousId:d,type:e,userAgent:navigator.userAgent,pageReferrer:document.referrer,pageTitle:document.title,pageUrl:document.URL,screenDensity:window.devicePixelRatio,windowWidth:t,windowHeight:n,language:navigator.language||navigator.userLanguage}}function a(){!0===s()?(d=localStorage.getItem("aid"))||(d=l(),localStorage.setItem("aid",d)):(d=u("aid"))||c("aid",d=l(),3650)}function l(){return Math.random().toString(36).substring(2)}function c(e,t,n){var o="";if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),o="; expires="+r.toUTCString()}document.cookie=e+"="+t+o+"; path=/"}function u(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function s(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}var d,f="https://cat.pexels.com/atu.css",m=762885251;return e(),{page:t,track:n,getAnonymousId:o}}(),BuySellAds=function(){function e(){document.querySelector(".js-buysellads")&&n()}function t(){"undefined"!=typeof _bsa&&_bsa&&(bsa_script=document.getElementById("_bsa_srv-CKYDE2JI_0"),bsa_script&&bsa_script.parentNode.removeChild(bsa_script),_bsa.init("default","CKYDE2JI","placement:pexels",{target:"#photo-partner-box",image:"logo",default_text:"Partner Offer"}))}function n(){var e="__bsa_js__";if(document.getElementById(e))t();else{var n=document.getElementsByTagName("script")[0],o=document.createElement("script");o.id=e,o.src="//m.servedby-buysellads.com/monetization.js",o.onload=t,n.parentNode.insertBefore(o,n)}}return UTIL.ready(e),{init:n}}(),FacebookPixel=function(){function e(){!function(e,t,n,o,r,i,a){e.fbq||(r=e.fbq=function(){r.callMethod?r.callMethod.apply(r,arguments):r.queue.push(arguments)},e._fbq||(e._fbq=r),r.push=r,r.loaded=!0,r.version="2.0",r.queue=[],(i=t.createElement(n)).async=!0,i.src=o,(a=t.getElementsByTagName(n)[0]).parentNode.insertBefore(i,a))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),fbq("init","722281101294022"),fbq("track","PageView")}function t(e,t){"CompleteRegistration"==e?fbq("track",e,t):fbq("trackCustom",e,t)}return UTIL.ready(e),{track:t}}();window.pexelsFacebookPixelOnload!==undefined&&window.pexelsFacebookPixelOnload(),Track=function(){function e(e,t,n,o,r){Analytics.track(e,t,n,o,r),ga("send","event",{eventCategory:e,eventAction:t,eventLabel:n,eventValue:o,transport:r}),"download"==e?FacebookPixel.track(e):"photo"==e&&"submitted"==t?FacebookPixel.track("PhotosUploaded",{count:o}):"user"==e&&"sign-up"==t&&FacebookPixel.track("CompleteRegistration")}function t(){Analytics.page(),ga("send","pageview",location.pathname),fbq("track","PageView")}if("undefined"!=typeof Track&&Track.eventList){var n=!0,o=!1,r=undefined;try{for(var i,a=Track.eventList[Symbol.iterator]();!(n=(i=a.next()).done);n=!0)args=i.value,e.apply(undefined,_toConsumableArray(args))}catch(l){o=!0,r=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw r}}}return{page:t,event:e}}();var TrackLinks=function(){function e(){t(document.querySelectorAll("[data-track-action]")),o(".carbon-ad, .carbon-ad-in-photos")}function t(e){Array.prototype.forEach.call(e,function(e){e.addEventListener("click",n)})}function n(e){for(var t=e.target,n=0;n<4&&null==t.getAttribute("data-track-label");n++)t=t.parentNode;Track.event("track-click",t.getAttribute("data-track-action"),t.getAttribute("data-track-label"),undefined,"beacon")}function o(e){(a=document.querySelector(e))&&a.addEventListener("DOMSubtreeModified",r)}function r(){a.removeEventListener("DOMSubtreeModified",r);var e=a.querySelector(".carbon-img"),t=a.querySelector(".carbon-text");e&&e&&(e.addEventListener("click",i),t.addEventListener("click",i))}function i(){Track.event("track-click","carbon","carbon")}return UTIL.ready(e),{bindEvents:t,carbonClicks:o};var a}(),CarbonAds=function(){function e(e){TrackLinks.carbonClicks(".js-photo-modal .carbon-ad"),null!=window._carbonads?window._carbonads.init(e):n||t()}function t(){!function(e,t,n){var o,r=e.getElementsByTagName(t)[0];e.getElementById(n)||((o=e.createElement(t)).id=n,o.async=1,o.src="//cdn.carbonads.com/carbon.js?zoneid=1696&serve=CKYDE2JL&placement=pexels",r.parentNode.insertBefore(o,r))}(document,"script","__carbon_js__"),n=!0}var n=!1;return{init:e}}();!function(){function e(){var e=document.querySelector(".js-chrome-extension");if(e){window.chrome||UTIL.removeClass(e,"tool-overview__item--large")}}UTIL.ready(e)}(),function(){function e(){dropdown=document.querySelector(".js-click-dropdown"),dropdown&&new t(dropdown)}function t(e){function t(){r?o():n()}function n(){UTIL.addClass(e,"click-dropdown--open"),r=!0,window.setTimeout(function(){document.addEventListener("click",o)},0)}function o(){UTIL.removeClass(e,"click-dropdown--open"),r=!1,document.removeEventListener("click",o)}var r=!1;e.addEventListener("click",t)}UTIL.ready(e)}();var FormSpamProtections=function(){function e(){var e=document.querySelectorAll("[data-action]");Array.prototype.forEach.call(e,function(e){e.setAttribute("action",e.getAttribute("data-action"))})}return UTIL.ready(e),{init:e}}(),SignUpModal=function(){function e(){var e=document.querySelector(r);if(!o){var i=e.getAttribute("data-sign-up-path");UTIL.getRequest(i,t,n)}}function t(e){document.querySelector(r+" .modal__content").innerHTML=e,o=!0,FormSpamProtections.init()}function n(){}var o=!1,r=".js-sign-up-modal";return ModalInitializer({selector:r,onOpen:e})}(),CollectionPhotosListStore=function(){function e(){document.addEventListener("new-photos",t),t()}function t(){if(UTIL.isSignedIn())for(var e=i(),t=0;t<e.length;t++){var o=document.querySelectorAll(".js-collect-"+e[t]);Array.prototype.forEach.call(o,n)}}function n(e){e&&!UTIL.hasClass(e,l)&&(UTIL.addClass(e,l),UTIL.addClass(e.querySelector("svg"),"icon-check"),UTIL.removeClass(e.querySelector("svg"),"icon-plus"),e.querySelector("svg use").href.baseVal="#iconCheck",UTIL.hasClass(e,c)&&e.querySelector("svg").setAttribute("viewBox",u))}function o(e){if(e){var t=UTIL.hasClass(e,c);UTIL.removeClass(e,l),UTIL.addClass(e.querySelector("svg"),"icon-plus"),UTIL.removeClass(e.querySelector("svg"),"icon-check"),e.querySelector("svg use").href.baseVal=t?"#iconCirclePlus":"#iconPlus",t&&e.querySelector("svg").setAttribute("viewBox",s)}}function r(e,t){t=parseInt(t,10);var r=i(),a=r.indexOf(t),l=document.querySelector(".js-collect-"+t);"added"===e?(-1===a&&r.push(t),n(l)):"removed"===e&&(r.splice(a,1),o(l)),localStorage.collected=JSON.stringify(r)}function i(){var e=localStorage.collected,t=new Date(localStorage.collected_expire_at);return!e||t<new Date?(a(),[]):JSON.parse(e)}function a(){var e=new Date;e.setHours(e.getHours()+2),localStorage.collected_expire_at=e,m.request({method:"GET",url:"/collections/photos/",headers:{"X-CSRF-Token":UTIL.getCsrfToken()},withCredentials:!0}).then(function(e){e.not_signedin?Logout.logout():(localStorage.collected=JSON.stringify(e),t())})}var l="btn-like--active",c="btn-like--large",u="0 0 30 30",s="0 0 16 16";return UTIL.ready(e),{change:r}}(),CollectionStore=function(){function e(){return{"X-CSRF-Token":UTIL.getCsrfToken()}}function t(){null===h.list&&m.request({method:"GET",url:"/me/collections/",headers:e(),withCredentials:!0}).then(r)["catch"](n)}function n(){alert("Error: Please reload the page and try to collect the photo again. If it still doesn't work please contact: info@pexels.com")}function o(){return h}function r(e){e&&(h={list:e.map(function(e){return e.id}),byId:e.reduce(function(e,t){return e[t.id]=t,e},{})})}function i(e){if(e&&e.id){var t=e.id;Array.isArray(h.list)?-1===h.list.indexOf(t)&&h.list.unshift(t):h.list=[t],h.byId[t]=e,a()}}function a(){var e=!1;for(var t in g)c(t)&&(e=!0);CollectionPhotosListStore.change(e?"added":"removed",v)}function l(e){v!==e&&"string"==typeof e&&(v=e,g={},u(e))}function c(e){return Boolean(g[e])}function u(t){m.request({url:"/photo/:id/collections/",data:{id:t},headers:e(),withCredentials:!0}).then(function(e){Array.isArray(e)&&e.reduce(function(e,t){return e[t]=!0,e},g)})["catch"](n)}function s(t){g[t]=!0,m.request({method:"POST",url:"/collections/:id/photos/",data:{id:t,photo_id:v},headers:e(),withCredentials:!0}).then(i)["catch"](n),p("addToCollection")}function d(t){g[t]=!1,m.request({method:"DELETE",url:"/collections/:id/photos/",data:{id:t,photo_id:v},headers:e(),withCredentials:!0}).then(i)["catch"](n),p("removeFromCollection")}function f(t){var o=m.request({method:"POST",url:"/collections/",data:{title:t},headers:e(),withCredentials:!0});return o.then(function(e){i(e),s(e.id)})["catch"](n),p("createCollection"),o}function p(e){Track.event("collect",e,v)}var h={list:null,byId:{}},v=null,g={};return{data:o,load:t,isActive:c,setPhoto:l,addToCollection:s,removeFromCollection:d,createCollection:f}}(),CollectionModal=function(){function e(){m.mount(document.querySelector(r),l)}function t(){m.mount(document.querySelector(r),null)}var n=UTIL.getCookie("locale"),o=".js-collection-modal",r=o+" .modal__content",i="en"===n?"":"/"+n,a={view:function(e){var t=e.attrs,n=t.item,o=CollectionStore.isActive(n.id),r=(n.preview_images||[])[0];return m("li.l-lg-6",{key:n.id},[m(".collection.collection--small",{role:"button","data-collection-id":n.id,className:[o?"collection--active":"",t.hovered?"collection--hover":""].join(" "),onmouseenter:o&&m.withAttr("data-collection-id",t.onEnter),onmouseleave:t.onLeave,onclick:m.withAttr("data-collection-id",o?CollectionStore.removeFromCollection:CollectionStore.addToCollection)},[o&&[m("svg.icon-check.collection__icon",{viewBox:"0 0 24 24"},m("use",{"xlink:href":"#iconCheck"})),m("svg.icon-check.collection__icon.collection__icon--remove",{viewBox:"0 0 15 15"},m("use",{"xlink:href":"#iconPlus"}))],void 0===r?m("svg.icon-camera.collection__img.collection__img--placeholder",{viewBox:"0 0 16 16"},m("use",{"xlink:href":"#iconCamera"})):m(".collection__img.o-clip.o-clip--cover",{style:{backgroundImage:"url("+r+")"}}),m(".collection__body.collection__gradient",m("span",n.title))])])}},l={hoveredItem:null,toggleHovered:function(e){this.hoveredItem=e},oninit:function(){CollectionStore.load()},view:function(e){var t=CollectionStore.data(),n=e.state.hoveredItem,o=e.state.toggleHovered.bind(e.state),r=e.state.toggleHovered.bind(e.state,null);return m(".collections",[m(CreateCollection,{className:"collections__create js-create-toggle"}),m("h4.collections__title",[i18n("collection_save")]),null===t.list?m(LoadingSpinner):m("ul.collections__list.l-row",0===t.list.length?m("li.l-lg-6",m(".collection.collection--small.collection--empty",{onclick:function(t){t.stopPropagation(),e.dom.querySelector(".js-create-toggle button").click()}},[m(".collection__body",i18n("collection_create"))])):t.list.map(function(e){var i=t.byId[e];return i?m(a,{item:i,hovered:n===e,onEnter:o,onLeave:r}):null})),m("p.collections__footer",[m("a",{href:i+"/me/collections/"},[i18n("collection_view")])])])}};return ModalInitializer({selector:o,onClose:t,onOpen:e})}();!function(){function e(){document.addEventListener("new-photos",t),t()}function t(){var e=document.querySelectorAll(".js-collect");Array.prototype.forEach.call(e,function(e){e.getAttribute("data-initialized")||(e.setAttribute("data-initialized","true"),e.addEventListener("click",n))})}function n(e){e.stopPropagation();for(var t=e.target;"button"!=t.tagName.toLowerCase();)t=t.parentNode;var n=t.getAttribute("data-photo-id");if(!UTIL.isSignedIn())return o("not-signedin",n),void SignUpModal.open();o("opened",n),CollectionStore.setPhoto(n),CollectionModal.open()}function o(e,t){Track.event("collect",e,t)}UTIL.ready(e)}();var CreateCollection={isWorking:!1,hasError:!1,isOpen:!1,title:"",parent:null,handler:null,oncreate:function(e){try{var t=e.dom.parentNode.parentNode,n=function(n){if(e.state.isOpen){for(var o=n.target;o!==t;){if(o===e.dom)return;o=o.parentNode}e.state.isOpen=!1,m.redraw()}};e.state.parent=t,e.state.handler=n,t.addEventListener("click",n)}catch(o){}},onbeforeremove:function(e){e.state.parent&&e.state.parent.removeEventListener("click",e.state.handler)},onupdate:function(e){if(e.state.isOpen){var t=e.dom.querySelector("input");t!==document.activeElement&&t.focus()}},view:function(e){var t=e.attrs,n=e.state,o=t.className||"";return m("div.click-dropdown",{className:n.isOpen?o+" click-dropdown--open":o},[m('button.btn-quiet.btn--sm[type="button"]',{onclick:function(e){e.preventDefault(),n.isOpen=!n.isOpen}},i18n("collection_create")),n.isOpen&&m(".click-dropdown__content.btn__dropdown",[m("form.form.form--padded.clearfix",{className:n.hasError?"field_with_errors":"",onsubmit:function(e){e.preventDefault(),n.isWorking||(n.title?(n.isWorking=!0,CollectionStore.createCollection(n.title).then(function(){n.isWorking=!1,n.hasError=!1,n.isOpen=!1,n.title=""})):n.hasError=!0)}},[m(".form__group",[m("label.form__label",{"for":"collection_title"},i18n("collection_title")),m('input.form__input[type="text"]',{oninput:m.withAttr("value",function(e){n.title=e}),value:n.title,name:"collection_title",id:"collection_title"})]),m('button.btn-secondary.form__button[type="submit"]',{className:n.isWorking?"disabled":"",disabled:n.isWorking},i18n("collection_create"))])])])}};!function(){function e(){var e=document.querySelector(".js-copy-button");e&&e.addEventListener("click",t)}function t(){document.querySelector(".js-copy-textarea").select();try{document.execCommand("copy")}catch(t){}var e=document.querySelector(".js-copy-success");UTIL.removeClass(e,"hidden")}UTIL.ready(e)}();var DownloadOverlay=function(){function e(){var e=document.querySelectorAll(".photo-modal__content"),t=document.querySelectorAll(".photo-modal__close"),n=e.length-1;UTIL.removeClass(e[n],"photo-modal__content--hidden"),t[n].addEventListener("click",function(){UTIL.addClass(e[n],"photo-modal__content--hidden")})}return{open:e}}(),PredictionsModal=function(){function init(){if(!UTIL.isSignedIn()&&!wasOpened&&window.innerWidth>680){wasOpened=!0;var locale=UTIL.getCookie("locale"),linkPrefix="en"===locale?"":"/"+locale,trackingId=Analytics.getAnonymousId(),path=linkPrefix+"/predictions/?tid="+trackingId,request=UTIL.scriptRequest(path);request.onload=function(){200==request.status&&(eval(request.responseText),track("show"))},request.send()}}function isLoaded(){var e=document.querySelector(".js-predictions-modal-close");e&&e.addEventListener("click",close)}function close(e){e.preventDefault(),track("close");var t=document.querySelector(".js-predictions-modal");UTIL.addClass(t,"hidden")}function track(e){Track.event("track-click","predictions-modal",e)}var wasOpened=!1;return{init:init,isLoaded:isLoaded}}();Download=function(){function e(){r=Analytics.getAnonymousId();var e=document.querySelectorAll(".js-download");e&&Array.prototype.forEach.call(e,function(e){e.getAttribute("data-initialized")||(e.setAttribute("data-initialized","true"),e.addEventListener("click",t))})}function t(){n("click",this.getAttribute("data-id")),DownloadOverlay.open(),PredictionsModal.init()}function n(e,t){Track.event("download",e,t);var n=UTIL.getSearchQueryFromReferrer(),i="/photo/td/",a=document.documentElement.getAttribute("lang");o(i,{photo_id:t,tracking_id:r,search_query:n,locale:a})}function o(e,t){var n=new XMLHttpRequest,o=document.querySelector('meta[name="csrf-token"]').getAttribute("content");n.open("POST",e,!0),n.setRequestHeader("X-CSRF-Token",o),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(t))}var r;return UTIL.ready(e),{init:e,track:n}}();var CustomDownload=function(){function e(){var e=document.getElementsByClassName("js-download-size-btn");Array.prototype.forEach.call(e,function(e){var a=e.nextElementSibling;if(a&&!a.getAttribute("data-initialized")){a.setAttribute("data-initialized","true");var l=a.querySelector(".custom-size__width");if(l){var c=a.querySelector(".custom-size__height"),u={customHeightInput:c,customWidthInput:l,customSizeRadio:a.querySelector("#custom-size__value"),dropdown:a};i(u),c.addEventListener("input",function(){o(u)}),l.addEventListener("input",function(){r(u)}),Array.prototype.forEach.call(a.getElementsByClassName("select-list__item"),function(e){e.addEventListener("click",t)}),a.querySelector(".custom-size__submit").addEventListener("click",function(e){n(e,this,u)})}}})}function t(){this.querySelector('input[type="radio"]').checked=!0,Array.prototype.forEach.call(document.getElementsByClassName("select-list__item"),function(e){UTIL.removeClass(e,"select-list--active")}),UTIL.addClass(this,"select-list--active")}function n(e,t,n){var o,r,i,l,c=n.customHeightInput,u=n.customWidthInput;if(n.customSizeRadio.checked){if(!("function"!=typeof u.checkValidity||u.checkValidity()&&c.checkValidity()))return;a(o=u.value,r=c.value),i=o+"x"+r}else{var s=(l=n.dropdown.querySelector('input[name="download-size"]:checked')).value.split("x");o=s[0],r=s[1],i=l.getAttribute("data-name")}if(e.preventDefault(),l&&null!==l.getAttribute("data-alt-url")&&"download"in document.createElement("a")&&-1===navigator.userAgent.search("Firefox")){var d=document.createElement("a");d.setAttribute("href",l.getAttribute("data-alt-url")),d.setAttribute("download",""),d.click()}else{var f=t.getAttribute("data-url")+"?dl&fit=crop&w="+o+"&h="+r;window.location.href=f}Download.track(i,t.getAttribute("data-id")),DownloadOverlay.open()}function o(e){var t=e.customHeightInput.value,n=Math.round(t*e.customHeightInput.getAttribute("data-aspect-ratio"));e.customWidthInput.placeholder=n}function r(e){var t=e.customWidthInput.value,n=Math.round(t*e.customWidthInput.getAttribute("data-aspect-ratio"));e.customHeightInput.placeholder=n}function i(e){var t=JSON.parse(localStorage.getItem("customDownloadSize"));t&&(t.height||t.width)&&(e.customHeightInput.value=t.height,e.customWidthInput.value=t.width,o(e),r(e))}function a(e,t){var n={width:e,height:t};localStorage.setItem("customDownloadSize",JSON.stringify(n))}return UTIL.ready(e),{init:e}}(),Dropdown=function(){function e(){var e=document.getElementsByClassName("js-dropdown");e.length&&Array.prototype.forEach.call(e,function(e){e.getAttribute("data-initialized")||new t(e)})}function t(e){function t(e){i||e.preventDefault(),clearTimeout(r),n(),UTIL.addClass(l,"open")}function o(){clearTimeout(r),r=window.setTimeout(function(){UTIL.removeClass(l,"open")},400)}var r,i="true"==e.getAttribute("data-is-clickable"),a=e.getAttribute("data-dropdown-selector")||e.getAttribute("href"),l=null!=e.nextElementSibling&&e.nextElementSibling.matches(a)?e.nextElementSibling:document.querySelector(a);e.addEventListener("mouseenter",t),e.addEventListener("click",t),l.addEventListener("mousemove",t),l.addEventListener("mouseleave",o),e.addEventListener("mouseleave",o),e.setAttribute("data-initialized","true")}function n(){var e=document.querySelectorAll(".btn__dropdown.open");Array.prototype.forEach.call(e,o)}function o(e){UTIL.removeClass(e,"open")}return UTIL.ready(e),{init:e}}(),FollowingActionHandler=function(){function e(){document.addEventListener("new-photos",t),t()}function t(){var e=document.querySelectorAll(".js-follow");Array.prototype.forEach.call(e,function(e){e.getAttribute("data-initialized")||(e.setAttribute("data-initialized","true"),e.addEventListener("click",n))})}function n(e){e.stopPropagation();for(var t=e.target;"button"!=t.tagName.toLowerCase();)t=t.parentNode;var n=t.getAttribute("data-follow-track-label");if(!UTIL.isSignedIn())return l("not-signedin",n),void SignUpModal.open();var c,u,d=t.getAttribute("data-user-id");UTIL.hasClass(t,s)?(c="/followers/Follow/",u="DELETE",a(t),l("unfollow",n)):(c="/followers/Follow/",u="POST",i(t),l("follow",n)),m.request({url:c+"?user_id="+d,method:u,background:!0,headers:{"X-CSRF-Token":UTIL.getCsrfToken()}}).then(o)["catch"](r)}function o(e){e.not_signedin?(SignUpModal.open(),Logout.logout()):FollowingStore.handleFollow(e.action,e.user_id)}function r(){alert("Error: Please reload the page and try to follow the user again. If it still doesn't work please contact: info@pexels.com")}function i(e){UTIL.addClass(e,s),UTIL.hasClass(e,d)?(u||(u=e.innerHTML),e.innerHTML="\u2713"):(u||(c=e.innerHTML),e.innerHTML=i18n("following"))}function a(e){UTIL.removeClass(e,s),UTIL.hasClass(e,d)?e.innerHTML=u:e.innerHTML=c}function l(e,t){Track.event("follow",e,t)}var c,u,s="btn-follow--active",d="btn-follow--tiny";return UTIL.ready(e),{activateFollowBtn:i}}(),FollowingStore=function(){function e(){document.addEventListener("new-photos",t),document.addEventListener("new-users",t),t()}function t(){if(UTIL.isSignedIn())for(var e=o(),t=0;t<e.length;t++){var n=document.querySelectorAll(".js-follow-"+e[t]);Array.prototype.forEach.call(n,FollowingActionHandler.activateFollowBtn)}}function n(e,t){var n=o();if("follow"==e)-1==n.indexOf(t)&&n.push(t);else if("unfollow"==e){var r=n.indexOf(t);n.splice(r,1)}localStorage.followings=JSON.stringify(n)}function o(){var e=localStorage.followings,t=new Date(localStorage.followings_expire_at);return!e||t<new Date?(r(),[]):JSON.parse(e)}function r(){UTIL.getRequest("/followers/followings/",i,a);var e=new Date;e.setHours(e.getHours()+2),localStorage.followings_expire_at=e}function i(e){JSON.parse(e).not_signedin?Logout.logout():(localStorage.followings=e,t())}function a(){}return UTIL.ready(e),{handleFollow:n}}();!function(){function init(){if(newPhotosLink=document.querySelector(".js-new-photos-link"),trendingPhotosLink=document.querySelector(".js-trending-photos-link"),followingLink=document.querySelector(".js-following-link"),trendingPhotosLink&&newPhotosLink&&followingLink){newPhotosLink.addEventListener("click",loadNewPhotos),trendingPhotosLink.addEventListener("click",loadTrendingPhotos),followingLink.addEventListener("click",loadFollowing),window.addEventListener("popstate",onBack),trendingPhotosPath=trendingPhotosLink.getAttribute("href"),newPhotosPath=newPhotosLink.getAttribute("href"),followingPath=followingLink.getAttribute("href");var e=history.state||{};UTIL.hasClass(newPhotosLink,TAB_ACTIVE_CLASS)?(e.activeHomeTab="new",window.history.replaceState(e,"New Free Photos",document.URL)):UTIL.hasClass(followingLink,TAB_ACTIVE_CLASS)?(e.activeHomeTab="following",window.history.replaceState(e,"Following",document.URL)):(e.activeHomeTab="trending",window.history.replaceState(e,"Free stock photos",document.URL))}}function onBack(){history.state&&history.state.activeHomeTab&&("new"===history.state.activeHomeTab?loadNewPhotos():"following"===history.state.activeHomeTab?loadFollowing():loadTrendingPhotos())}function loadNewPhotos(e){if(clickWithKeyPressed(e))return!1;loadPhotos(e,newPhotosLink),e&&(window.history.pushState({activeHomeTab:"new"},"New Free Photos",newPhotosPath),Track.page())}function loadFollowing(e){if(clickWithKeyPressed(e))return!1;loadPhotos(e,followingLink),e&&(window.history.pushState({activeHomeTab:"following"},"Following",followingPath),Track.page())}function loadTrendingPhotos(e){if(clickWithKeyPressed(e))return!1;loadPhotos(e,trendingPhotosLink),e&&(window.history.pushState({activeHomeTab:"trending"},"Free stock photos",trendingPhotosPath),Track.page())}function loadPhotos(event,link){event&&event.preventDefault(),ENDLESS_SCROLLING.terminate(),document.querySelector(".photos").innerHTML="",document.querySelector(".js-pagination").innerHTML="",UTIL.removeClass(newPhotosLink,TAB_ACTIVE_CLASS),UTIL.removeClass(trendingPhotosLink,TAB_ACTIVE_CLASS),UTIL.removeClass(followingLink,TAB_ACTIVE_CLASS),UTIL.addClass(link,TAB_ACTIVE_CLASS),history&&history.state&&(history.state.pos=window.pageYOffset);var url=link.getAttribute("data-url")+"&format=js",request=UTIL.scriptRequest(url);request.onload=function(){request.status>=200&&request.status<400&&(eval(request.responseText),ENDLESS_SCROLLING.init())},request.send()}function clickWithKeyPressed(e){return e&&(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)}var newPhotosLink,trendingPhotosLink,followingLink,newPhotosPath,trendingPhotosPath,followingPath,TAB_ACTIVE_CLASS="title-tabs__tab--active";UTIL.ready(init)}(),UTIL.ready(initHotjar);var LikeStore=function(){function e(){document.addEventListener("new-photos",t),t()}function t(){if(UTIL.isSignedIn())for(var e=o(),t=0;t<e.length;t++){var n=document.querySelectorAll(".js-like-"+e[t]);Array.prototype.forEach.call(n,function(e){UTIL.addClass(e,l),UTIL.addClass(e,c)})}}function n(e,t){var n=o();if("like"==e)-1==n.indexOf(t)&&n.push(t);else if("unlike"==e){var r=n.indexOf(t);n.splice(r,1)}localStorage.likes=JSON.stringify(n)}function o(){var e=localStorage.likes,t=new Date(localStorage.likes_expire_at);return!e||t<new Date?(r(),[]):JSON.parse(e)}function r(){UTIL.getRequest("/likes/",i,a);var e=new Date;e.setHours(e.getHours()+2),localStorage.likes_expire_at=e}function i(e){JSON.parse(e).not_signedin?Logout.logout():(localStorage.likes=e,t())}function a(){}var l="btn-like--active",c="btn-like--no-animations";return UTIL.ready(e),{handleLike:n}}();!function(){function e(){document.addEventListener("new-photos",t),t()}function t(){var e=document.querySelectorAll(".js-like");Array.prototype.forEach.call(e,function(e){e.getAttribute("data-initialized")||(e.setAttribute("data-initialized","true"),e.addEventListener("click",n))})}function n(e){e.stopPropagation();for(var t=e.target;"button"!=t.tagName.toLowerCase();)t=t.parentNode;var n=t.getAttribute("data-photo-id");if(!UTIL.isSignedIn())return i("not-signedin",n),void SignUpModal.open();var c,u;UTIL.hasClass(t,a)?(c="/photo/PHOTO_ID/likes/",u="DELETE",UTIL.removeClass(t,l),UTIL.removeClass(t,a),i("unlike",n)):(c="/photo/PHOTO_ID/likes/",u="POST",UTIL.addClass(t,a),i("like",n)),m.request({url:c.replace("PHOTO_ID",n),method:u,background:!0,headers:{"X-CSRF-Token":UTIL.getCsrfToken()}}).then(o)["catch"](r)}function o(e){e.not_signedin?(SignUpModal.open(),Logout.logout()):LikeStore.handleLike(e.action,e.photo_id)}function r(){alert("Error: Please reload the page and try to like the photo again. If it still doesn't work please contact: info@pexels.com")}function i(e,t){Track.event("like",e,t)}var a="btn-like--active",l="btn-like--no-animations";UTIL.ready(e)}(),function(){function e(){(o=document.querySelector(".js-chart-container"))&&t(n)}function t(e){var t="image_view_chart",n=UTIL.scriptRequest(t);n.onload=function(){o.innerHTML=n.responseText,e()},n.send()}function n(){var e=document.querySelector(".js-chart-data");if(e){var t=e.getAttribute("data-title"),n=JSON.parse(e.getAttribute("data-labels")),o=JSON.parse(e.getAttribute("data-data")),r=document.getElementById("chart");new Chart(r,{type:"line",data:{labels:n,datasets:[{label:t,backgroundColor:"rgba(39, 174, 96, .3)",borderColor:"rgba(39, 174, 96, 1)",pointBackgroundColor:"#fff",data:o}]},options:{legend:{display:!1},tooltips:{xPadding:10,yPadding:10},scales:{yAxes:[{ticks:{callback:function(e){return e>=1e6?e/1e6+"M":e>=1e3?e/1e3+"k":e}}}]}}})}}var o;UTIL.ready(e)}(),function(){function e(){(n=document.querySelector(".navbar--hero"))&&(t(),window.addEventListener("scroll",t))}function t(){document.documentElement.scrollTop>100||document.body.scrollTop>100?UTIL.removeClass(n,"navbar--hero"):UTIL.addClass(n,"navbar--hero")}var n;UTIL.ready(e)}(),function(){function e(){o=document.querySelector(".navbar__toggle--search"),r=document.querySelector(".navbar__toggle--menu"),i=document.querySelector(".navbar-overlay"),null!==r&&r.addEventListener("click",t),null!==i&&i.addEventListener("click",t),null!==o&&o.addEventListener("click",n)}function t(){document.querySelector(".navbar__md-nav--menu").classList.toggle("navbar__md-nav--open"),document.querySelector(".navbar").classList.toggle("navbar--open"),document.querySelector("body").classList.toggle("navbar-open"),r.classList.toggle("navbar__toggle--active")}function n(){var e=document.querySelector(".navbar__md-nav--search").classList;e.contains("navbar__md-nav--open")?(e.remove("navbar__md-nav--open"),o.classList.remove("navbar__toggle--active")):(e.add("navbar__md-nav--open"),o.classList.add("navbar__toggle--active"),document.querySelector(".navbar__md-nav--search input").focus())}var o,r,i;UTIL.ready(e)}();var Paypal=function(){function e(){var e=document.querySelectorAll(".js-paypal-btn");Array.prototype.forEach.call(e,function(e){e.getAttribute("data-initialized")||(e.setAttribute("data-initialized","true"),e.addEventListener("click",t))})}function t(){document.querySelector(".js-paypal-form").submit()}return UTIL.ready(e),{init:e}}();!function(){function e(){document.querySelector(".js-photo-predictions")&&PhotoGrid.init(".js-photo-predictions")}UTIL.ready(e)}();var PhotoZoom=function(){function e(e){return function(t){var n=e.attrs.bounds;e.state.offsetX=o((t.clientX-n.left)/n.width),e.state.offsetY=o((t.clientY-n.top)/n.height)}}function t(e,t,n){function o(o){o.stopPropagation(),document.addEventListener("click",r),m.mount(t,{view:function(){return m(a,{prefix:n&&n.prefix,bounds:e.getBoundingClientRect(),x:o.clientX,y:o.clientY})}})}function r(){document.removeEventListener("click",r),m.mount(t,null)}e.addEventListener("click",o)}function n(e,n){null==e&&(e=document);var o=e.querySelector(".js-photo-zoom"),r=e.querySelector(".js-photo-zoom-target");o&&t(o,r,n)}function o(e){return Math.min(100,Math.max(0,100*e))}UTIL.ready(n);var r=3,i={view:function(e){var t=e.attrs,n=t.prefix||"";return m("style",[n+".image-section__zoom {","  display: block;","  background-size: "+t.width+"px "+t.height+"px;","  background-position: "+t.offsetX+"% "+t.offsetY+"%","};"])}},a={offsetX:0,offsetY:0,height:0,width:0,oninit:function(t){var n=t.attrs.bounds;t.state.height=n.height*r|0,t.state.width=n.width*r|0,t.state.offsetX=o((t.attrs.x-n.left)/n.width),t.state.offsetY=o((t.attrs.y-n.top)/n.height),t.state.onMove=e(t)},view:function(e){var t=e.state;return[m(".absolute",{onmousemove:t.onMove}),m(i,{prefix:e.attrs.prefix,width:t.width,height:t.height,offsetX:t.offsetX,offsetY:t.offsetY})]}};return{init:n}}(),SponsoredPhotos=function(){function init(){var e=(arguments.length<=0||arguments[0]===undefined?document:arguments[0]).querySelector(".js-sponsored-photos");e&&("false"!=e.getAttribute("data-load-on-init")?loadSponsoredPhotos(e):document.addEventListener("end-of-photos",function(){loadSponsoredPhotos(e)}))}function loadSponsoredPhotos(el){if(el&&!el.getAttribute("data-loaded")){var url=el.getAttribute("data-url"),request=UTIL.scriptRequest(url);request.onload=function(){document.body.contains(el)&&request.status>=200&&request.status<400&&(eval(request.responseText),el.setAttribute("data-loaded",!0))},request.send()}}return UTIL.ready(init),{init:init}}(),PhotoDetails=function(){function init(){var els=document.querySelectorAll(".js-insert-details");Array.prototype.forEach.call(els,function(el){if(el&&!el.getAttribute("data-initialized")){el.setAttribute("data-initialized","true");var path=el.getAttribute("data-details-path");if(performance.navigation.type!==performance.navigation.TYPE_RELOAD&&performance.navigation.type!==performance.navigation.TYPE_BACK_FORWARD){var refQuery=UTIL.getSearchQueryFromReferrer();null!==refQuery&&(path+="?ref_query="+refQuery)}var request=UTIL.scriptRequest(path);request.onload=function(){eval(request.responseText),ConfirmDialog.init()},request.send()}})}return UTIL.ready(init),{init:init}}(),PhotoModal=function(){function e(e){return void 0===e&&(e=window.location.pathname),null!=e.match(g)}function t(e){var t=window.history.state;return null==t?null:"string"==typeof e?t[e]:t}function n(){if(e()&&null!=t()){var n=window.location.pathname;UTIL.getRequest(window.location.pathname+"modal",function(e){if(n===window.location.pathname){var t=window.history.state;t.html=e,t.step=f,window.history.replaceState(t,window.title,n),m.redraw()}},console.log)}}function o(){var e=window.innerHeight,t=window.innerWidth;return e<681||t<1281?650:Math.min(750,e-70)}function r(){var e=window.innerHeight,t=window.innerWidth;return e<681||t<1281?940:1260}function i(e){if(e){var t=e.parentNode;rowGrid(t.querySelector(".photos"),v),TrackLinks.bindEvents(t.querySelectorAll("a[data-track-label], button[data-track-label]")),CarbonAds.init(t.querySelector(".carbon-ad")),SponsoredPhotos.init(t),PhotoZoom.init(t,{prefix:".modal "})}CustomDownload.init(),Download.init(),Dropdown.init(),Paypal.init(),PhotoDetails.init(),SocialScripts.init(),BuySellAds.init(),UTIL.triggerEvent("new-photos")}function a(e,t){null!=e&&(t=isNaN(t)?0:t,"function"==typeof e.scroll?e.scroll(0,t):e.scrollTop=t)}function l(){var e=document.querySelector(p);if(f+=1,s)return a(e,0),m.redraw(),!1;m.mount(document.querySelector(h),L),UTIL.addClass(document.body,"has-open-modal--page"),s=!0,window.requestAnimationFrame(function(){0!==e.scrollTop&&a(e,0)})}function c(){if(UTIL.hasClass(document.querySelector(".js-sign-up-modal"),"is-open")||UTIL.hasClass(document.querySelector(".js-collection-modal"),"is-open"))return!1;var e=document.querySelector(h);if(m.mount(e,null),e.innerHTML="",0!==f){var n=f;if(t("step")!==n)window.history.pushState({},b,w);else{d=!0,window.history.go(-1*n);var o=t()||{},r=window.document.title,i=window.location.pathname;window.history.go(n),d=!1,window.history.pushState(o,r,i)}}UTIL.removeClass(document.body,"has-open-modal--page"),f=0,s=!1}function u(t){d||(e()?y&&w===window.location.pathname?s&&(f=0,S.close()):s?(t.state&&!isNaN(t.state.step)&&(f+=t.state.step-f),m.redraw()):S.open():y?window.location.reload():s&&(f=0,S.close()),Track.page())}var s=!1,d=!1,f=0,p=".js-photo-modal",h=p+" .modal__content",v={minMargin:10,maxMargin:10,itemSelector:".photo-item",firstItemClass:"first-item",lastRowClass:"last-row",resize:!0,minWidth:426},g=/^\/photo|de\/foto\//,y=e(),w=window.location.pathname,b=window.document.title,L={current:"",initialized:"",oninit:function(e){e.state.current=window.location.pathname,n()},oncreate:function(e){null!=t("html")&&window.requestAnimationFrame(function(){e.state.initialized=e.state.current,i(e.dom)})},onupdate:function(e){e.state.current!==window.location.pathname&&(e.state.current=window.location.pathname),null==t("html")?n():e.state.initialized!==e.state.current&&(e.state.initialized=e.state.current,i(e.dom))},view:function(){var e=t();if(null==e)return null;var n=e.photoHeight/e.photoWidth,i=(100*n|0)+"%",a=o(),l=Math.min(r(),a/n)+"px";if(null!=e.html)return[m("style",[".image-section__photo-wrap { width: 100%; max-width: "+l+"; }",".image-section__photo-wrap-width { height: 0; padding-bottom: "+i+"; }",".image-section__photo-wrap .image-section__image, .image-section__thumb { display: block; position: absolute; height: 100%; width: 100%; }"]),m.trust(e.html)];var c=650===a?e.photoLarge:e.photoBig;return[m("section.image-section",[m(".image-section__content",[m(".image-section__preview",{style:{maxWidth:l}},[m(".image-section__preview__wrap",{style:{paddingBottom:i,background:e.photoBg}},[e.photoThumb&&m("img.image-section__image",{src:e.photoThumb}),c&&m("img.image-section__image",{src:c})])])]),m(".image-section__sidebar")]),m(".photo-details",{style:"height: 400px"})]}},S=ModalInitializer({selector:p,onOpen:l,onClose:c});return window.addEventListener("popstate",u),S}();!function(){function e(){!isNaN(window.devicePixelRatio)&&window.devicePixelRatio>1&&(r=!0),document.addEventListener("new-photos",t),t()}function t(){var e=document.querySelectorAll(".js-photo-link");Array.prototype.forEach.call(e,function(e){e.getAttribute("data-initialized")||(e.setAttribute("data-initialized","true"),e.addEventListener("click",o))})}function n(e,t){if(!e||!r)return e;t=void 0===t?2:t;var n=e.split("&");return n.splice(t,0,"dpr=2"),n.join("&")}function o(e){if(!e||!(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)){e.stopPropagation(),e.preventDefault();for(var t=e.target;"a"!=t.tagName.toLowerCase();)t=t.parentNode;var o=t.querySelector("img"),r={photoBg:o.style.background,photoBig:n(o.getAttribute("data-big-src")),photoLarge:n(o.getAttribute("data-large-src")),photoThumb:n(o.src,1),photoHeight:o.height,photoWidth:o.width};window.history.pushState(r,o.title,t.pathname),PhotoModal.open(),Track.page()}}var r=!1;UTIL.ready(e)}(),function(){function e(){var e=document.querySelector(".js-32bit-warning");e&&"Win32"===navigator.platform&&-1===navigator.userAgent.indexOf("WOW64")&&-1===navigator.userAgent.indexOf("Win64")&&-1===navigator.userAgent.indexOf(" x64")&&"x64"!==navigator.cpuClass&&UTIL.removeClass(e,"hidden")}UTIL.ready(e)}();var SocialScripts=function(){function e(){t()}function t(){document.querySelector(".fb-like")&&(loaded?window.FB&&window.FB.XFBML&&window.FB.XFBML.parse():(loaded=!0,function(e,t,n){var o,r=e.getElementsByTagName(t)[0];e.getElementById(n)||((o=e.createElement(t)).id=n,o.async=1,o.src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3&appId=248395878694096",r.parentNode.insertBefore(o,r))}(document,"script","facebook-jssdk")))}return loaded=!1,e(),{init:e}}();!function(){function e(){r=document.querySelector(".switch-locale");for(var e=document.querySelectorAll(".js-show-switch-locale"),n=0;n<e.length;n++)e[n].addEventListener("click",function(e){e.preventDefault(),t(!0)});if((navigator.language||navigator.userLanguage).split("-")[0]!=document.documentElement.getAttribute("lang")){var o=new Date(localStorage.getItem("hide_switch_locale_until"));r&&(!o||o<new Date)&&t(!1)}}function t(e){UTIL.addClass(r,"switch-locale--is-visible"),e?(UTIL.removeClass(r,"switch-locale--bottom-bar"),UTIL.addClass(r,"switch-locale--modal")):(UTIL.removeClass(r,"switch-locale--modal"),UTIL.addClass(r,"switch-locale--bottom-bar")),i||(n(),i=!0)}function n(){var e=document.querySelectorAll(".js-switch-locale-btn");Array.prototype.forEach.call(e,function(e){e.addEventListener("click",function(){o(e)})})}function o(e){e.getAttribute("data-close")&&UTIL.removeClass(r,"switch-locale--is-visible");var t=new Date;t.setDate(t.getDate()+90),localStorage.setItem("hide_switch_locale_until",t)}var r,i=!1;UTIL.ready(e)}();var TagEditor=function(){function e(){if(null==window.TagEditorScript){var e=document.createElement("script");e.src="/assets/tag-editor-76ccc393f2189663e019c01d392350874c41facd44e26973fcb027c4fd4446ab.js",document.body.appendChild(e)}else TagEditorScript.init()}return{load:e}}(),AddPhotoTags=function(){function e(){var e=document.querySelectorAll(".js-add-tags-link");Array.prototype.forEach.call(e,function(e,n){e.getAttribute("data-initialized")||(e.setAttribute("data-initialized","true"),t(e,n))})}function t(e,t){function n(e){e.preventDefault(),o(),TagEditor.load(),i.addEventListener("submit",r)}function o(){UTIL.addClass(e,"hidden"),UTIL.removeClass(i,"hidden")}function r(e){e.preventDefault();var n=document.querySelectorAll(".js-add-tags-success")[t];UTIL.addClass(i,"hidden"),UTIL.removeClass(n,"hidden");var o=$(this).attr("action");$.ajax({type:"POST",url:o,data:$(i).serialize()})}var i=document.querySelectorAll(".js-add-tags-form")[t];e.addEventListener("click",n)}return{init:e}}();!function(){function e(){l=document.querySelector(".avatar-form"),c=document.querySelector(".js-avatar-input"),u=document.querySelector(".avatar-form__img"),d=document.querySelector(".avatar-form__progress-bar"),f=document.querySelector(".avatar-form__btn"),null!==c&&null!==l&&(f.addEventListener("click",t),u.addEventListener("click",t),c.addEventListener("change",function(){file=c.files[0],n()}))}function t(e){e.preventDefault(),c.click()}function n(){m=!1,l.classList.add("avatar-form--uploading"),window.onbeforeunload=function(){if(!m)return i18n("avatar_not_published")};var e=new FileReader;e.onload=function(e){u.setAttribute("src",e.target.result)},e.readAsDataURL(file),o()}function o(){var e=function(e){e=JSON.parse(e);s=e.file_name,r(e.fields,e.upload_url)},t=function(e){e=JSON.parse(e)||{},alert(e.error||i18n("no_upload_url"))};UTIL.getRequest("/users/avatar_upload_url/?file_type="+file.type,e,t)}function r(e,t){var n=new XMLHttpRequest;n.upload.addEventListener("progress",i),n.open("POST",t),n.setRequestHeader("X-CSRF-Token",UTIL.getCsrfToken()),n.onload=function(){
n.status>=200&&n.status<400&&a()},n.onerror=function(){alert(i18n("upload_error"))};var o=new FormData;for(key in e)o.append(key,e[key]);o.append("file",file),n.send(o)}function i(e){if(e.lengthComputable){var t=e.loaded/e.total*100;d.style.width=t+"%"}}function a(){var e=function(e){m=!0,l.classList.remove("avatar-form--uploading"),e=JSON.parse(e),u.setAttribute("src",e.avatar_url);if(t=localStorage.user){var t;(t=JSON.parse(t)).avatar=e.avatar_url,localStorage.user=JSON.stringify(t)}},t=function(){alert(i18n("try_again"))};UTIL.getRequest("/users/avatar_upload_success/?file_name="+s,e,t)}var l,c,u,s,d,f,m=!1;UTIL.ready(e)}();var ConfirmDialog=function(){function e(){var e=document.querySelectorAll("[data-confirm]");Array.prototype.forEach.call(e,function(e){e&&!e.getAttribute("data-initialized")&&(e.addEventListener("click",t),e.setAttribute("data-initialized","true"))})}function t(e){window.confirm(e.target.getAttribute("data-confirm"))||e.preventDefault()}return UTIL.ready(e),{init:e}}(),GeoAutocompleteLoadScript=function(){function e(e){if(t)return!0;var n=document.documentElement.lang,o=document.createElement("script");return o.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCJ0gSv0MjwjHtRwrcoeNowjNdm3N-AWDU&libraries=places&callback="+e+"&language="+n,document.body.appendChild(o),t=!0,!1}var t=!1;return{load:e}}(),GeoAutocompleteForm=function(){function e(){var e=document.querySelectorAll(".js-show-geo-autocomplete"),n=document.querySelectorAll(".js-add-location-form");Array.prototype.forEach.call(e,function(e,o){e.getAttribute("data-initialized")||(e.setAttribute("data-initialized","true"),e.addEventListener("click",function(r){r.preventDefault(),UTIL.addClass(e,"hidden"),UTIL.removeClass(n[o],"hidden"),t()}))})}function t(){var e="GeoAutocompleteForm.handleAutocompleteLoaded";GeoAutocompleteLoadScript.load(e)&&n()}function n(){var e=document.querySelectorAll(".js-add-location-form");Array.prototype.forEach.call(e,function(e){if(!e.getAttribute("data-initialized")){e.setAttribute("data-initialized","true");var t=e.querySelector(".js-geo-autocomplete"),n=new GeoAutocomplete(t);e.addEventListener("submit",o(n,e))}})}function o(e,t){return function(){t.querySelector(".js-geo-autocomplete-place-id").value=e.getPlaceId(),t.querySelector(".js-geo-autocomplete-longitude").value=e.getLongitude(),t.querySelector(".js-geo-autocomplete-latitude").value=e.getLatitude()}}return{init:e,handleAutocompleteLoaded:n}}(),GeoAutocompleteProfile=function(){function e(){if(r=document.querySelector(".js-geo-autocomplete-profile-input")){var e="GeoAutocompleteProfile.isLoaded";GeoAutocompleteLoadScript.load(e)}}function t(){o=new GeoAutocomplete(r,null,{types:["(cities)"]});document.querySelector(".js-geo-autocomplete-profile-form").addEventListener("submit",n)}function n(){document.querySelector(".js-geo-autocomplete-place-id").value=o.getPlaceId(),document.querySelector(".js-geo-autocomplete-longitude").value=o.getLongitude(),document.querySelector(".js-geo-autocomplete-latitude").value=o.getLatitude()}var o,r;return e(),{isLoaded:t}}(),GeoAutocomplete=function(e,t,n){function o(){t?t.addEventListener("click",function(e){e.preventDefault(),UTIL.addClass(t,"hidden"),r()}):r()}function r(){UTIL.removeClass(e,"hidden");var t=new google.maps.places.Autocomplete(e,n);t.addListener("place_changed",function(){var e=t.getPlace();l=e.place_id,i=e.geometry.location.lat(),a=e.geometry.location.lng()})}var i,a,l;return o(),{getLatitude:function(){return i},getLongitude:function(){return a},getPlaceId:function(){return l}}};!function(){function e(){var e=document.querySelector(".js-anonymous-id");if(e){var t=Analytics.getAnonymousId();e.value=t}var n=document.querySelector(".js-anonymous-id-link");if(n){t=Analytics.getAnonymousId();n.href+="&anonymous_id="+t}}UTIL.ready(e)}();var Logout=function(){function e(){var e=document.querySelector(".js-logout-btn");e&&e.addEventListener("click",t)}function t(){localStorage.removeItem("likes"),localStorage.removeItem("likes_expire_at"),localStorage.removeItem("collected"),localStorage.removeItem("collected_expire_at"),localStorage.removeItem("user"),n("pexels_auth"),n("avatar_url")}function n(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"}return UTIL.ready(e),{logout:t}}();!function(){function e(){(o=document.querySelector(".js-newsletter-checkbox"))&&UTIL.getRequest("/me/newsletter-subscription-status/",t,n)}function t(e){if(isSubscribed="true"==e,isSubscribed){document.getElementById("user_subscribed_newsletter_before").value=!0,o.checked=!0,localStorage.setItem("newsletterSubscribed","true")}}function n(){}var o;e()}();var PhotoUpload=function(e,t){function n(){h="video/mp4"==e.type?"video":"photo",m=document.querySelector(".js-photo-upload-list"),Promise.all([o(),i()]).then(function(e){return"photo"==h?a(e[1]):c(e[1])}).then(function(){return s()}).then(function(){I=!0,d(_),t()})["catch"](f)}function o(){return new Promise(function(n,o){var i=document.createElement("div");i.innerHTML=document.querySelector("#js-photo-upload-item").innerHTML,(w=i.firstElementChild).querySelector("img").setAttribute("alt",e.name),m.insertBefore(w,m.firstChild),UTIL.triggerEvent("init-tag-editor");var a=w.querySelector(".js-show-geo-autocomplete"),l=w.querySelector(".js-geo-autocomplete");T=new GeoAutocomplete(l,a),b=w.querySelector(".upload-item__progress-bar"),L=w.querySelector(".upload-item__progress-text"),S=L.getAttribute("data-uploading"),k=L.getAttribute("data-error"),_=L.getAttribute("data-success"),abortBtn=w.querySelector(".upload-item__abort"),abortBtn.addEventListener("click",function(){A=!0,t(),r(w)});var c=new FileReader;c.onload=function(t){var r;if("photo"===h)(r=w.querySelector("img.upload-item__preview")).onload=function(){v=this.naturalWidth,g=this.naturalHeight,y=e.size,v*g<2e6?o(i18n("min_resolution")):n()};else{var i=w.querySelector(".upload-item__location");UTIL.addClass(i,"hidden"),r=w.querySelector("video.upload-item__preview"),setTimeout(function(){v=r.videoWidth,g=r.videoHeight,y=e.size},1e3),n()}r.setAttribute("src",t.target.result),UTIL.removeClass(r,"hidden")},c.readAsDataURL(e)})}function r(e){var t=e.offsetHeight,n=t/15;e.style.overflow="hidden";var o=function(){e.style.height=(t-=n)+"px",t>0?setTimeout(o,20):e.style.display="none"};o()}function i(){return new Promise(function(t,n){var o=function(e){e=JSON.parse(e);p=e.photo_id,t(e)},r=function(e){e=JSON.parse(e)||{},n(e.error||i18n("no_upload_url"))},i="/upload/upload_url/?file_type="+e.type+"&"+Math.floor(1e5*Math.random())+"&size="+e.size;UTIL.getRequest(i,o,r)})}function a(t){return new Promise(function(n,o){var r=t.fields,i=t.upload_url,a=new XMLHttpRequest;a.upload.addEventListener("progress",l),a.open("POST",i),a.setRequestHeader("X-CSRF-Token",UTIL.getCsrfToken()),a.onload=function(){a.status>=200&&a.status<400&&n()},a.onerror=function(){o(i18n("upload_error"))};var c=new FormData;for(key in r)c.append(key,r[key]);c.append("file",e),a.send(c)})}function l(e){e.lengthComputable&&u(e.loaded,e.total)}function c(t){return new Promise(function(n,o){t.fields;var r=t.upload_url;new XMLHttpRequest;new tus.Upload(e,{endpoint:r,resume:!1,retryDelays:[0,1e3,3e3,5e3],onError:function(e){o("Failed because: "+e)},onProgress:u,onSuccess:function(){n()}}).start()})}function u(e,t){var n=e/t*100;b.style.width=n+"%";d(S.replace("{{percent}}",Math.round(n)+"%"))}function s(){return new Promise(function(e,t){var n=function(){t(i18n("try_again"))},o="?id="+p+"&width="+v+"&height="+g+"&filesize="+y;UTIL.getRequest("/upload/success/"+o,e,n)})}function d(e){L.innerHTML=e}function f(e){A=!0,d(e||k),t(),UTIL.addClass(w,"upload-item--error")}var m,p,h,v,g,y,w,b,L,S,k,_,T,A=!1,I=!1;return n(),{isSuccessful:function(){return I},isAborted:function(){return A},getPhotoId:function(){return p},getPhotoTags:function(){return w.querySelector(".js-tag-editor").value},getPhotoLatitude:function(){return T.getLatitude()},getPhotoLongitude:function(){return T.getLongitude()},getPhotoPlaceId:function(){return T.getPlaceId()}}};!function(){function e(){if(c=document.querySelector(".js-file-input"),u=document.querySelector(".dragover-overlay"),s=document.querySelector(".js-submit-btn"),d=document.querySelector(".js-submit-btn-tooltip"),f=document.querySelector(".js-submit-form"),m=document.querySelector(".js-submit-photos"),null!==c&&null!==u&&null!==s&&null!==f)if(t()){if("undefined"==typeof Promise){var e=document.createElement("script");e.src="/assets/es6-promise-433c9e6a20dbb3d8ba0ef452fded53e11f9e3f77b7837a2bb7a0afd790d5b648.js",document.body.appendChild(e)}TagEditor.load(),c.addEventListener("change",function(){i(c.files)}),document.addEventListener("dragover",n),document.addEventListener("dragleave",n),document.addEventListener("drop",r),f.addEventListener("submit",l)}else alert("Houston, we have a problem. Please use a modern browser to upload photos.")}function t(){var e=new XMLHttpRequest;return!!(e&&"upload"in e&&"onprogress"in e.upload&&window.FileList)}function n(e){e.stopPropagation(),e.preventDefault(),o(e)?(e.dataTransfer.dropEffect="copy","dragover"==e.type?u.style.display="block":e.target==u&&(u.style.display="none")):e.dataTransfer.dropEffect="none"}function o(e){if(e.dataTransfer.types)for(var t=0;t<e.dataTransfer.types.length;t++)if("Files"==e.dataTransfer.types[t])return!0;return!1}function r(e){n(e),i(e.target.files||e.dataTransfer.files)}function i(e){if(0!=e.length){d.removeAttribute("data-tooltip-disabled"),s.setAttribute("disabled","disabled"),window.onbeforeunload=function(){if(!p)return i18n("photos_not_published")};for(var t=0;t<e.length;t++){var n=new PhotoUpload(e[t],a);h.push(n)}}}function a(){for(var e=0;e<h.length;e++)if(!h[e].isSuccessful()&&!h[e].isAborted())return;d.setAttribute("data-tooltip-disabled","disabled"),s.removeAttribute("disabled")}function l(){p=!0;for(var e=[],t=0;t<h.length;t++)h[t].isSuccessful()&&!h[t].isAborted()&&e.push({id:h[t].getPhotoId(),tags:h[t].getPhotoTags(),latitude:h[t].getPhotoLatitude(),longitude:h[t].getPhotoLongitude(),google_place_id:h[t].getPhotoPlaceId()});m.value=JSON.stringify(e)}var c,u,s,d,f,m,p=!1,h=[];UTIL.ready(e)}();